import { Meta, ColorPalette, ColorItem } from "@storybook/blocks";
import ColorsRaw from '@/assets/styles/colors.scss?raw';

export const parseCSSVariables = (cssString, identifier) => {
  const regex = /--([\w-]+):\s*([^;]+)/g;
  const matches = cssString.matchAll(regex);
  const result = {};

  for (const match of matches) {
    if (!identifier) {
      result[match[1]] = match[2].trim();
    } else {
      const key = match[1].trim();
      if (key.startsWith(identifier)) {
        result[match[1]] = match[2].trim();
      }
    }
  }
  return result;
}

export const cssVariables = parseCSSVariables(ColorsRaw);

export const colorPaletteFunctionalSuccess = parseCSSVariables(ColorsRaw, 'functional-color-success');
export const colorPaletteGray = parseCSSVariables(ColorsRaw, 'brand-color-gray');
export const colorPalettePrimary = parseCSSVariables(ColorsRaw, 'primary-brand-color');
export const colorPalettePrimaryView = () => {
  const local = {};
  Object.entries(colorPalettePrimary).map(([key, value]) => {
    const cssVarToKey = value.replace('var(--', '').replace(')', '');
    local[key] = cssVariables[cssVarToKey];
  });
  return local;
};
export const colorPaletteBrandWhite = parseCSSVariables(ColorsRaw, 'brand-color-white');
export const colorPaletteBrandOrange = parseCSSVariables(ColorsRaw, 'brand-color-orange');
export const colorPaletteBrandBlue = parseCSSVariables(ColorsRaw, 'brand-color-blue');
export const colorPaletteBrandAnthracite = parseCSSVariables(ColorsRaw, 'brand-color-anthracite');

<Meta title="Colors" />

## Primäre Farben

Unsere primären Markenfarben sind Anthracite, Blue und Orange.
  - Anthracite und Blue eher im Hintergrund
  - Orange als Akzent (z.B. Buttons, Links, Infos)
  - Weiß als Hintergrund für textlastige Seiten und Formulare

<ColorPalette>
  <ColorItem
    title="Primary"
    subtitle=""
    colors={colorPalettePrimaryView()}
  />
</ColorPalette>

<ColorPalette>
  <ColorItem
    title="Anthracite"
    subtitle=""
    colors={colorPaletteBrandAnthracite}
  />

  <ColorItem
    title="Orange"
    subtitle=""
    colors={colorPaletteBrandOrange}
  />

  <ColorItem
    title="White"
    subtitle=""
    colors={colorPaletteBrandWhite}
  />

  <ColorItem
    title="Blue"
    subtitle="Dont know"
    colors={colorPaletteBrandBlue}
  />
</ColorPalette>


## Functional Colors - Funktionalefarben

  - Funktionalfarben nach Ampelsystem- Für Benachrichtigungen, Warnungen und Statusmeldungen
  - Für Typografie wird der leuchtende Farbcode verwendet. Für Hintergründe jeweils angepasste Varianten
  - Grün = Erfolgreich / Positiv
  - Gelb = (Neutrale)  Aufmerksamkeit- Rot = Fehler / Negativ

<ColorPalette>
  <ColorItem
    title="Functional Success"
    subtitle=""
    colors={colorPaletteFunctionalSuccess}
  />

  <ColorItem
    title="Gray"
    subtitle="Dont know"
    colors={colorPaletteGray}
  />
</ColorPalette>
